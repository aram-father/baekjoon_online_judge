**Problme No:** 07578
**Problem Id:** 공장


segment tree를 사용하는 inversion counting 문제로 reduction될 수 있다.


주어진 0행이 `m[i-2] m[i-1] m[i] m[i+1] m[i+2] ...`와 같았다고 하자.


주어진 1행에서 각 `m[i]`에 대응되는 지점들을 `d[i]`로 아래와 같이 표현해보자.


`m[i-2] m[i-1] m[i] m[i+1] m[i+2]`


`d[i] d[i+2] d[i-2] d[i+1] d[i-1]`


이 때, `m[i]`와 `d[i]`를 선으로 이어보고 나서 `m[i] <-> d[i]`와 겹치는 전선이 누구일까를 생각해보면 `m[i]`보다 앞에서 출발해서, `d[i]`보다 뒤에 도착하는 전선들임을 알 수 있다.


전형적인 inversion counting의 예임을 알 수 있고, 그대로 풀어주면 된다.


단, 이때, `m[i-1] <-> d[i-1]`을 기준으로 생각해보면 `m[i-1]` 보다 뒤에서 출발해서, `d[i-1]`보다 앞에 도착하는 전선들을 세야하는 게 아닌가 하는 걱정이 들 수 있다.


하지만, 우상향 전선 기준으로 세건 우하향 전선으로 세건 답에는 차이가 없으므로, 여기서는 일반성을 잃지 않고 우상향 전선을 기준으로만 세었다.

